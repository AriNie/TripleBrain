---
layout: post
title: AtCoder Regular Contest 112 A,B問題を解く # ページタイトル
tags: atcoder algorithm python # タグ
categories: atcoder # カテゴリ. AtCoderの解説記事は atcoder で.
---


* TOC
{:toc}

Author: れぇなん　<!-- 自分の名前 -->

<!-- ↓↓↓↓↓ 記事内容 ↓↓↓↓↓ -->
# A問題 B=C

<a href="https://atcoder.jp/contests/arc112/tasks/arc112_a" target="_blank">A - B = C</a>

> ## 問題文
>L
  以上 
R
 以下の整数 
A
,
B
,
C
 の組であって、
A
−
B
=
C
 を満たすものは何通りありますか？
>
>T
 個のケースが与えられるので、それぞれについて答えを求めてください。

> ## 制約
> * 1
≤
T
≤
2
×
10^4
>
> * 0
≤
L
≤
R
≤
10^6
>
> * 入力はすべて整数

<br>

## 方針
制約的に、それぞれのケースについて一つの式で求めていかないといけなさそう。

<br>

`A-B=C`だと個人的に少しやりにくいので`B+C=A`に変形する。

<br>

このとき、BとCの範囲はそれぞれ[L,R]である。範囲をもう少し簡略化するために`R'=R-L`とし、BとCの範囲を[0,R']とした。

<br>

このときのAの範囲は`La=L-2L`,`Ra=R-2L`とすると、[La,Ra]だと言える。また、制約と`R'=R-L`より、Aの範囲は[0,R']になる。

<br>

つまり、「２つの値を組み合わせて0～R'の値を作れるものは何通りあるか」という問題として考えることが出来る。

<br>

0は0と0でしか作れないため、1通り、1は1と0、もしくは0と1でしか作れないため2通り、といったように組み合わせは数が１増えるごとに1ずつ増えていくので、1+2+....+R'を求めればよい。

<br>

## コード(Python)

```python
T = int(input())
for i in range(T):
  L,R = map(int,input().split())
  Ra = R - 2*L
  if Ra < 0:
    print(0)
  else:
    print((Ra+1)*(Ra+2)//2)
```
---

# B問題 -- - B

<a href="https://atcoder.jp/contests/arc112/tasks/arc112_b" target="_blank">B - -- - B</a>

> ## 問題文
>すぬけくんは、整数 
B
 を持って整数やさんを訪れました。 整数やさんでは、お金を払うことで、持っている整数を別の整数にしてもらうことができます。
>
>具体的には、次の 
2
 種類のサービスを好きな順で好きなだけ購入することができます。
>
> * 1
 円を払い、持っている整数を 
−
1
 倍する。
>
> * 2
 円を払い、持っている整数から 
1
 を引く。
>
>すぬけくんが 
C
 円以内で作ることのできる整数は何通りありますか？

> ## 制約
> * −
10^18
≤
B
≤
10^18
>
> * 1
≤
C
≤
10^18
>
> * 入力はすべて整数

<br>

## 方針
整数Bが取りうる範囲を考える。
<br>
1円を支払うことにより値をマイナスに出来るため、整数Bの範囲と-Bの範囲をそれぞれ求めたい。
<br>
先に考えやすいBの最小値を考える。2円を支払うことにより値を-1出来るため、所持金÷2の数だけ-1出来る。つまり、```B-(C//2)```が最小値。
<br>
-Bの最小値は、Bを-Bにするために1円支払い、残りのC-1円で-1円ずつ出来る。つまり、```-B-(C-1//2)```が最小値。
<br>
-Bの最大値は、最初にC-1円支払いBを-1ずつしたのちに1円支払い正負を逆転させた値である。つまり、```-B+(C-1//2)```が最大値。
<br>
最後に、Bの最大値を考える。整数やさんは正負逆転か-1しか出来ないため、単純に値を増やすことは出来ない。なので、「正負を逆転させBを-Bに」→「-Bを-1ずつ減らす」→「正負を逆転」をする必要がある。すなわち、正負逆転を２回行う必要があるため、-1に使える金額はC-2円となる。つまり、```B+(C-2//2)```が最大値。
<br>
それぞれの範囲が分かり、範囲内の整数は必ず作ることが出来るので、何通りかを計算することが出来る。
<br>
ここで注意しなければならないのが、Bの範囲と-Bの範囲が被っている可能性がある。その場合、重複分を引く必要がある。
<br>
また、与えられたBが負の場合は重複分の計算式が変わってくるので注意が必要である。(コード参照)

<br>

## コード(Python)

```python
B,C = map(int,input().split())

Bma = B + max(0,(C-2)//2)#Bの最大値
Bmi = B - C//2#Bの最小値
mBma = -B + (C-1)//2#-Bの最大値
mBmi = -B - (C-1)//2#-Bの最小値(Bが正のとき)

#何通りあるかの計算
#重複がある場合には重複分を引く
if mBma >= Bmi and B > 0:
  print((Bma-Bmi+1)+(mBma-mBmi+1)-(mBma-Bmi+1))
elif Bma >= mBmi and B < 0:
  print((Bma-Bmi+1)+(mBma-mBmi+1)-(Bma-mBmi+1))
elif B == 0:
  print(C)
else:
  print((Bma-Bmi+1)+(mBma-mBmi+1))
```
